use crate::{mock::*, Error, Validators, Headers, types::Header};
use frame_support::{assert_noop, assert_ok};
use sp_std::vec;
use sp_std::vec::Vec;
use codec::{Decode};
use sp_runtime::DispatchError;

// Headers for testing
const BLOCK_200: [u8; 1090] = [56, 0, 0, 0, 0, 0, 0, 0, 17, 221, 139, 143, 215, 88, 127, 210, 141, 1, 65, 71, 109, 44, 225, 115, 43, 236, 227, 71, 201, 59, 181, 79, 31, 236, 238, 185, 10, 245, 242, 157, 29, 204, 77, 232, 222, 199, 93, 122, 171, 133, 181, 103, 182, 204, 212, 26, 211, 18, 69, 27, 148, 138, 116, 19, 240, 161, 66, 253, 64, 212, 147, 71, 206, 47, 215, 84, 78, 11, 44, 201, 70, 146, 212, 167, 4, 222, 190, 247, 188, 182, 19, 40, 43, 221, 65, 48, 10, 18, 169, 152, 157, 157, 212, 59, 107, 20, 93, 185, 223, 75, 95, 132, 51, 248, 243, 197, 240, 155, 67, 175, 131, 81, 167, 151, 170, 118, 41, 50, 32, 181, 6, 22, 76, 212, 45, 137, 73, 157, 86, 80, 127, 84, 156, 103, 168, 137, 228, 4, 214, 40, 243, 17, 43, 106, 85, 185, 34, 111, 55, 172, 153, 75, 15, 240, 245, 170, 12, 236, 108, 52, 205, 187, 206, 214, 13, 137, 216, 189, 236, 145, 133, 55, 39, 60, 175, 185, 77, 234, 28, 224, 231, 108, 202, 167, 59, 16, 203, 31, 194, 197, 176, 7, 53, 239, 177, 140, 68, 123, 239, 100, 197, 249, 251, 150, 182, 224, 124, 110, 151, 128, 68, 205, 51, 95, 182, 5, 49, 201, 247, 83, 114, 53, 1, 89, 21, 210, 110, 251, 199, 153, 222, 211, 174, 170, 81, 103, 14, 192, 47, 245, 110, 169, 157, 210, 64, 116, 141, 86, 209, 62, 119, 43, 65, 216, 171, 85, 34, 60, 111, 86, 42, 97, 247, 246, 120, 95, 255, 53, 83, 54, 138, 156, 18, 78, 89, 53, 151, 123, 43, 55, 127, 64, 205, 175, 162, 217, 55, 232, 252, 51, 217, 67, 182, 207, 168, 174, 143, 239, 204, 99, 151, 189, 21, 202, 197, 243, 54, 50, 155, 189, 87, 45, 123, 135, 110, 195, 86, 229, 63, 57, 192, 214, 40, 172, 196, 111, 20, 39, 209, 222, 241, 155, 173, 77, 202, 128, 63, 176, 238, 11, 225, 173, 136, 222, 119, 13, 244, 145, 123, 109, 90, 111, 77, 30, 211, 237, 85, 218, 38, 206, 85, 233, 109, 103, 235, 127, 121, 230, 35, 204, 127, 215, 135, 15, 140, 9, 222, 115, 144, 159, 50, 193, 117, 227, 244, 50, 243, 23, 160, 102, 58, 219, 232, 217, 238, 162, 223, 158, 48, 149, 241, 42, 189, 179, 252, 221, 81, 85, 193, 67, 3, 44, 220, 94, 236, 190, 217, 18, 96, 185, 87, 159, 91, 222, 63, 78, 240, 202, 108, 33, 24, 245, 125, 46, 2, 0, 0, 0, 0, 0, 0, 0, 8, 239, 22, 1, 0, 0, 0, 0, 248, 170, 152, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 164, 175, 151, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 210, 3, 150, 98, 0, 0, 0, 0, 216, 131, 1, 1, 10, 132, 103, 101, 116, 104, 136, 103, 111, 49, 46, 49, 51, 46, 52, 133, 108, 105, 110, 117, 120, 0, 0, 0, 195, 22, 123, 223, 1, 36, 101, 23, 108, 70, 26, 251, 49, 110, 188, 119, 60, 97, 250, 238, 133, 166, 81, 93, 170, 41, 94, 38, 73, 92, 239, 111, 105, 223, 166, 153, 17, 217, 216, 228, 243, 187, 173, 184, 155, 41, 169, 124, 110, 255, 184, 164, 17, 218, 188, 106, 222, 239, 170, 132, 245, 6, 124, 139, 190, 45, 76, 64, 123, 190, 73, 67, 142, 216, 89, 254, 150, 91, 20, 13, 207, 26, 171, 113, 169, 63, 52, 155, 186, 254, 193, 85, 24, 25, 184, 190, 30, 254, 162, 252, 70, 202, 116, 154, 161, 104, 91, 29, 237, 128, 19, 120, 93, 102, 35, 204, 24, 210, 20, 50, 11, 107, 182, 71, 89, 112, 246, 87, 22, 78, 91, 117, 104, 155, 100, 183, 253, 31, 162, 117, 243, 52, 242, 142, 24, 114, 182, 28, 96, 20, 52, 45, 145, 68, 112, 236, 122, 194, 151, 91, 227, 69, 121, 108, 43, 122, 226, 245, 185, 227, 134, 205, 27, 80, 164, 85, 6, 150, 217, 87, 203, 73, 0, 240, 58, 139, 108, 143, 217, 61, 111, 76, 234, 66, 187, 179, 69, 219, 198, 240, 223, 219, 91, 236, 115, 159, 140, 205, 175, 204, 57, 243, 199, 214, 235, 246, 55, 201, 21, 22, 115, 203, 195, 107, 136, 166, 247, 155, 96, 53, 159, 20, 29, 249, 10, 12, 116, 81, 37, 177, 49, 202, 175, 253, 18, 170, 207, 106, 129, 25, 247, 225, 22, 35, 181, 164, 61, 166, 56, 233, 31, 102, 154, 19, 15, 172, 14, 21, 160, 56, 238, 223, 198, 139, 163, 195, 92, 115, 254, 213, 190, 74, 7, 175, 181, 190, 128, 125, 221, 176, 116, 99, 156, 217, 250, 97, 180, 118, 118, 192, 100, 252, 80, 214, 44, 206, 47, 215, 84, 78, 11, 44, 201, 70, 146, 212, 167, 4, 222, 190, 247, 188, 182, 19, 40, 226, 211, 167, 57, 239, 252, 211, 169, 147, 135, 208, 21, 226, 96, 238, 250, 199, 46, 190, 161, 233, 174, 50, 97, 164, 117, 162, 123, 177, 2, 143, 20, 11, 194, 167, 200, 67, 49, 138, 253, 234, 10, 110, 60, 81, 27, 189, 16, 244, 81, 158, 206, 55, 220, 36, 136, 126, 17, 181, 93, 238, 34, 99, 121, 219, 131, 207, 252, 104, 20, 149, 115, 12, 17, 253, 222, 121, 186, 76, 12, 239, 2, 116, 227, 24, 16, 201, 223, 2, 249, 143, 175, 222, 15, 132, 31, 78, 102, 161, 205, 228, 74, 234, 220, 4, 212, 237, 161, 132, 81, 230, 189, 214, 11, 79, 227, 201, 160, 96, 71, 113, 199, 58, 194, 14, 171, 44, 114, 47, 110, 235, 147, 117, 188, 71, 7, 29, 158, 183, 193, 163, 245, 6, 235, 60, 249, 117, 44, 164, 163, 147, 41, 245, 225, 212, 161, 3, 82, 201, 141, 95, 234, 75, 67, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
const BLOCK_201: [u8; 670] = [56,0,0,0,0,0,0,0,91,181,236,208,187,16,29,38,54,51,196,10,117,236,109,15,52,163,225,204,2,238,193,105,179,218,154,175,233,152,211,29,29,204,77,232,222,199,93,122,171,133,181,103,182,204,212,26,211,18,69,27,148,138,116,19,240,161,66,253,64,212,147,71,226,211,167,57,239,252,211,169,147,135,208,21,226,96,238,250,199,46,190,161,186,179,132,129,175,159,48,12,72,151,188,32,150,142,190,19,202,182,228,93,96,2,180,109,52,145,167,78,114,252,129,212,218,219,124,106,22,182,10,90,150,26,245,86,229,112,216,22,109,112,38,94,33,204,67,87,136,70,49,31,138,10,195,228,17,64,2,172,90,86,131,74,72,219,82,18,62,230,26,14,150,67,253,65,64,111,31,177,194,185,143,54,56,105,32,23,164,164,234,167,132,198,80,209,171,173,0,250,167,55,6,204,187,227,20,234,212,69,135,73,123,115,214,56,46,173,83,24,44,175,41,219,168,19,114,25,67,191,112,124,134,100,21,80,15,7,68,149,10,44,88,184,229,88,52,90,53,116,52,170,137,238,38,96,9,109,87,180,223,235,123,92,194,100,58,191,229,89,250,168,182,196,40,126,194,212,34,197,136,108,128,232,137,64,127,246,95,22,177,177,87,195,111,159,51,215,217,228,137,241,74,199,160,57,172,176,45,38,16,190,208,130,101,11,31,236,174,9,31,113,116,220,70,137,134,16,174,119,14,164,49,164,7,21,148,241,133,12,225,57,97,100,8,226,91,125,202,242,0,68,3,9,119,108,46,115,105,52,99,95,137,174,124,198,37,177,248,211,45,182,82,142,114,32,66,238,116,254,125,51,124,11,147,150,234,34,166,199,245,167,38,54,82,202,181,66,124,43,129,204,37,208,250,236,163,230,56,157,227,182,251,241,191,67,14,149,117,1,35,194,179,153,196,104,24,68,79,142,132,88,66,200,21,220,170,194,24,182,113,29,159,123,2,0,0,0,0,0,0,0,9,239,22,1,0,0,0,0,161,67,158,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,246,216,88,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,213,3,150,98,0,0,0,0,216,131,1,1,10,132,103,101,116,104,136,103,111,49,46,49,51,46,52,133,108,105,110,117,120,0,0,0,195,22,123,223,0,220,59,188,59,203,207,213,32,61,251,95,138,141,6,216,120,102,44,233,125,217,1,180,130,41,145,26,31,74,151,65,165,71,193,49,62,177,113,126,105,233,92,56,97,172,175,191,159,172,87,212,191,87,107,132,69,189,11,53,197,76,66,104,234,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
const BLOCK_202: [u8; 670] = [56,0,0,0,0,0,0,0,18,217,133,218,95,10,195,214,163,55,35,41,23,99,54,84,18,121,23,65,32,16,241,111,163,59,165,106,14,106,2,125,29,204,77,232,222,199,93,122,171,133,181,103,182,204,212,26,211,18,69,27,148,138,116,19,240,161,66,253,64,212,147,71,233,174,50,97,164,117,162,123,177,2,143,20,11,194,167,200,67,49,138,253,78,114,239,208,195,81,217,232,157,149,194,100,30,211,106,80,61,123,54,225,94,220,135,228,103,18,244,230,174,229,176,32,88,168,0,3,174,89,215,154,31,118,224,40,114,69,217,115,189,222,134,242,177,27,43,34,178,22,54,208,188,52,11,224,247,56,26,246,219,236,14,123,242,169,40,170,251,47,110,125,18,47,218,177,119,92,54,54,236,117,58,40,110,100,128,101,159,185,191,243,213,174,219,112,250,125,239,127,153,240,220,107,135,110,111,207,254,223,175,220,119,95,121,53,255,201,155,199,107,115,25,124,237,127,180,84,251,238,52,62,198,239,219,4,13,207,244,179,191,254,191,151,112,77,123,93,236,246,110,202,202,76,159,231,35,93,38,121,71,42,219,63,239,181,235,237,253,219,171,117,255,253,170,122,238,245,222,247,252,91,78,239,111,211,250,252,79,118,31,159,98,223,178,55,251,247,200,125,191,100,250,217,206,175,111,118,81,245,6,246,101,13,181,229,248,48,171,249,31,159,126,255,69,153,165,155,62,180,127,158,106,247,159,255,113,62,249,12,125,88,95,193,170,250,155,245,191,207,84,234,247,13,175,86,167,121,235,93,231,158,238,136,246,161,183,50,111,147,55,174,214,137,58,28,136,103,124,255,229,145,255,218,174,37,246,194,159,154,62,255,174,178,246,234,109,95,186,251,226,255,112,154,91,159,239,207,221,247,233,182,245,181,254,117,240,187,222,247,39,76,179,126,112,254,223,67,247,236,127,252,231,247,116,250,189,255,13,165,189,254,95,63,2,0,0,0,0,0,0,0,10,239,22,1,0,0,0,0,164,170,154,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,227,70,142,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,3,150,98,0,0,0,0,217,131,1,1,10,132,103,101,116,104,137,103,111,49,46,49,54,46,49,53,133,108,105,110,117,120,0,0,195,22,123,223,0,44,49,40,227,200,14,9,69,96,211,77,229,255,217,27,127,28,213,57,38,247,35,117,143,32,174,45,209,248,113,182,161,93,105,30,95,6,147,104,240,47,199,178,98,34,160,41,4,48,155,164,59,212,199,188,100,95,250,75,190,131,77,106,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
const BLOCK_203: [u8; 670] = [56,0,0,0,0,0,0,0,92,146,39,231,242,67,190,25,92,208,242,35,201,107,51,226,22,45,83,71,166,163,13,237,206,0,84,50,179,58,94,181,29,204,77,232,222,199,93,122,171,133,181,103,182,204,212,26,211,18,69,27,148,138,116,19,240,161,66,253,64,212,147,71,234,10,110,60,81,27,189,16,244,81,158,206,55,220,36,136,126,17,181,93,188,94,102,142,210,64,211,228,134,110,92,219,3,158,9,151,194,173,109,133,33,54,20,118,168,98,170,114,22,126,145,76,106,28,146,205,86,32,157,14,165,221,115,245,79,129,55,215,22,131,227,101,201,195,104,201,196,128,23,65,84,12,68,4,167,77,47,80,205,61,102,186,24,203,177,196,170,175,6,73,168,108,55,196,195,94,121,74,47,205,153,191,67,50,222,67,61,38,102,45,11,141,148,182,170,113,66,101,193,53,25,72,193,140,11,91,181,167,39,63,63,31,197,5,24,136,97,189,150,165,153,72,164,209,50,41,99,43,53,114,142,68,201,71,43,58,18,98,6,46,106,249,65,91,0,12,0,47,226,128,200,198,44,227,128,131,2,214,77,160,65,77,96,99,195,178,52,241,175,179,167,70,106,234,144,101,9,156,144,223,134,102,5,96,190,60,70,95,225,209,33,75,151,129,86,21,217,81,123,65,208,123,242,124,12,6,2,53,213,211,108,139,165,113,127,26,170,77,148,33,0,236,46,205,166,96,148,81,72,237,33,228,236,181,229,226,169,232,169,129,76,114,180,137,120,58,150,139,50,1,191,109,166,232,180,17,169,145,170,203,163,141,224,112,78,166,169,178,67,15,171,169,54,89,104,183,86,155,97,47,77,234,221,16,216,94,133,13,39,144,28,7,209,91,238,86,54,208,40,50,123,217,72,18,103,111,16,98,242,50,40,18,157,67,136,6,86,16,159,105,2,6,68,32,16,182,93,126,172,11,206,68,76,200,148,82,195,48,146,36,69,176,2,0,0,0,0,0,0,0,11,239,22,1,0,0,0,0,77,69,160,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,136,126,17,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,219,3,150,98,0,0,0,0,216,131,1,1,10,132,103,101,116,104,136,103,111,49,46,49,51,46,52,133,108,105,110,117,120,0,0,0,195,22,123,223,0,83,97,244,43,118,164,237,234,74,241,66,39,253,163,94,118,85,18,5,93,115,175,72,250,88,70,53,246,145,159,75,153,15,204,32,87,50,108,137,181,31,193,180,168,225,63,174,80,24,65,59,6,52,6,191,39,115,255,118,57,115,213,37,67,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
const BLOCK_204: [u8; 670] = [56,0,0,0,0,0,0,0,136,77,96,59,220,97,255,69,197,73,41,33,142,226,191,83,171,240,120,37,149,210,38,203,144,92,44,105,128,8,195,171,29,204,77,232,222,199,93,122,171,133,181,103,182,204,212,26,211,18,69,27,148,138,116,19,240,161,66,253,64,212,147,71,238,34,99,121,219,131,207,252,104,20,149,115,12,17,253,222,121,186,76,12,151,29,246,247,250,214,127,113,51,195,72,179,122,210,119,248,201,6,175,204,171,71,132,240,193,155,90,147,147,217,28,201,154,149,16,152,72,229,213,70,204,138,234,237,119,203,171,6,139,188,222,5,134,203,184,171,91,203,165,185,210,183,35,178,124,103,170,18,31,179,117,94,147,191,12,11,141,5,102,18,235,135,190,223,104,44,9,122,90,39,41,147,49,85,154,68,180,188,247,11,0,245,150,54,165,75,54,243,189,185,199,255,176,145,112,59,205,13,214,222,93,118,124,48,120,174,113,221,142,191,122,203,197,196,242,51,231,159,52,56,164,117,129,42,157,187,182,3,66,201,77,53,106,30,72,7,89,228,174,222,237,236,143,176,241,214,232,59,207,226,210,76,38,21,39,57,121,88,202,183,190,230,255,46,174,39,65,216,211,48,199,98,90,95,30,54,78,223,195,165,94,110,47,197,32,211,216,247,187,28,41,231,204,248,63,231,116,227,138,125,108,42,127,153,90,252,191,229,144,225,185,203,92,149,180,44,191,156,142,247,100,165,158,93,86,187,91,42,191,189,205,207,219,160,124,255,147,107,243,46,143,195,112,218,108,85,233,231,238,183,234,207,179,63,240,174,44,213,243,83,148,214,63,101,51,229,235,93,99,178,127,203,39,156,223,82,245,247,185,211,9,243,215,239,115,250,205,209,96,19,62,221,126,123,237,207,209,149,243,99,191,241,253,227,105,213,241,101,163,96,194,154,71,226,19,214,215,173,239,252,127,91,232,126,178,218,56,231,109,223,127,31,2,0,0,0,0,0,0,0,12,239,22,1,0,0,0,0,70,63,156,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,249,201,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,222,3,150,98,0,0,0,0,216,131,1,1,5,132,103,101,116,104,136,103,111,49,46,49,54,46,55,133,108,105,110,117,120,0,0,0,195,22,123,223,0,138,122,88,229,170,140,104,46,13,19,251,6,240,52,250,97,33,154,65,98,223,145,242,110,148,203,37,48,50,151,197,160,18,248,182,14,242,141,185,10,253,2,252,131,44,210,186,32,241,205,204,149,80,248,103,77,203,182,4,64,225,22,48,22,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
const BLOCK_205: [u8; 670] = [56,0,0,0,0,0,0,0,180,60,49,52,39,186,3,192,44,147,146,54,49,130,216,255,141,62,4,16,135,244,160,199,124,93,174,193,90,112,38,67,29,204,77,232,222,199,93,122,171,133,181,103,182,204,212,26,211,18,69,27,148,138,116,19,240,161,66,253,64,212,147,71,239,2,116,227,24,16,201,223,2,249,143,175,222,15,132,31,78,102,161,205,158,213,197,94,235,214,197,186,15,220,230,15,1,172,119,118,56,247,55,52,57,9,157,100,166,204,136,127,134,5,140,57,38,201,148,4,101,48,148,44,34,94,193,149,211,253,12,221,237,249,128,112,218,207,170,201,181,197,212,110,174,155,47,15,12,215,99,104,118,189,54,36,157,138,25,218,115,65,76,4,85,164,214,93,6,163,38,95,26,160,129,205,237,210,144,144,180,50,179,193,8,238,209,81,202,59,26,17,177,163,98,69,105,128,38,64,236,8,143,152,93,15,116,250,216,213,181,0,193,181,2,123,233,148,18,142,131,159,24,57,114,77,65,103,44,3,254,16,30,236,175,162,110,83,81,34,140,52,102,207,41,208,180,228,177,73,98,180,121,35,113,122,194,84,42,109,116,240,143,48,250,199,154,5,234,116,3,195,182,15,217,96,93,49,30,241,15,178,186,51,196,74,3,141,177,194,90,80,136,3,180,99,233,169,38,208,50,59,16,215,92,136,222,208,213,56,176,41,59,110,95,46,80,219,158,157,174,153,154,199,108,165,6,117,22,88,112,186,185,9,227,109,201,206,221,184,110,30,144,72,242,150,132,83,186,28,127,227,170,214,139,152,1,111,216,53,161,242,44,43,76,198,179,80,34,109,162,97,240,135,53,107,19,202,249,27,67,205,177,199,222,2,212,110,183,149,162,104,153,201,59,155,40,49,117,255,211,54,234,74,124,241,165,201,48,156,79,213,3,80,60,116,221,55,146,23,96,29,85,190,239,156,29,95,181,168,156,242,218,10,13,46,2,0,0,0,0,0,0,0,13,239,22,1,0,0,0,0,8,163,150,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,120,129,80,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,225,3,150,98,0,0,0,0,216,131,1,1,7,132,103,101,116,104,136,103,111,49,46,49,54,46,55,133,108,105,110,117,120,0,0,0,195,22,123,223,0,57,204,18,78,20,38,97,124,9,74,123,94,253,107,244,144,107,243,137,12,155,224,89,99,63,1,212,114,233,8,129,201,60,176,22,144,89,37,199,179,81,46,232,220,71,173,33,44,1,160,158,63,187,36,199,223,15,190,218,182,76,63,179,94,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
const BLOCK_300: [u8; 670] = [56, 0, 0, 0, 0, 0, 0, 0, 236, 128, 148, 95, 189, 163, 167, 115, 252, 136, 233, 163, 36, 73, 118, 136, 134, 26, 19, 26, 96, 91, 178, 227, 98, 84, 247, 241, 22, 148, 126, 239, 29, 204, 77, 232, 222, 199, 93, 122, 171, 133, 181, 103, 182, 204, 212, 26, 211, 18, 69, 27, 148, 138, 116, 19, 240, 161, 66, 253, 64, 212, 147, 71, 159, 140, 205, 175, 204, 57, 243, 199, 214, 235, 246, 55, 201, 21, 22, 115, 203, 195, 107, 136, 152, 244, 245, 140, 223, 185, 53, 95, 86, 114, 96, 86, 192, 188, 123, 250, 69, 15, 183, 209, 159, 23, 152, 101, 176, 84, 154, 24, 174, 37, 44, 173, 239, 239, 130, 178, 243, 42, 169, 123, 64, 22, 183, 195, 76, 97, 215, 160, 0, 176, 208, 125, 58, 136, 192, 132, 83, 159, 5, 136, 19, 227, 169, 169, 191, 219, 97, 24, 112, 131, 21, 200, 38, 236, 229, 225, 152, 41, 139, 205, 241, 231, 185, 241, 195, 72, 21, 145, 130, 192, 144, 8, 204, 32, 2, 117, 188, 38, 147, 0, 8, 10, 81, 112, 198, 4, 0, 78, 197, 25, 13, 6, 170, 164, 70, 110, 212, 136, 15, 208, 35, 19, 69, 194, 62, 137, 95, 44, 0, 85, 10, 115, 44, 245, 20, 10, 155, 37, 9, 189, 130, 1, 17, 202, 27, 0, 62, 50, 86, 132, 137, 87, 68, 100, 98, 18, 86, 108, 114, 137, 129, 65, 165, 118, 37, 75, 70, 52, 87, 33, 219, 30, 69, 96, 107, 43, 103, 91, 86, 203, 137, 198, 76, 234, 236, 173, 102, 93, 201, 159, 204, 233, 23, 220, 158, 169, 111, 18, 135, 103, 183, 86, 62, 221, 16, 136, 57, 132, 110, 131, 65, 66, 155, 142, 119, 21, 124, 114, 85, 147, 99, 130, 239, 231, 191, 65, 132, 13, 182, 175, 104, 70, 199, 200, 4, 16, 200, 186, 143, 160, 96, 54, 204, 133, 61, 243, 101, 8, 169, 5, 29, 72, 97, 167, 187, 55, 14, 181, 176, 96, 6, 171, 54, 196, 41, 17, 137, 222, 106, 30, 150, 218, 32, 178, 7, 120, 70, 155, 69, 220, 70, 40, 33, 91, 33, 227, 246, 45, 48, 208, 108, 251, 3, 25, 206, 43, 84, 200, 53, 217, 25, 114, 83, 242, 113, 28, 32, 51, 33, 27, 60, 53, 106, 109, 37, 11, 145, 115, 245, 120, 36, 91, 126, 27, 1, 64, 116, 44, 51, 125, 183, 154, 70, 100, 23, 209, 84, 9, 124, 78, 231, 137, 13, 76, 247, 10, 74, 63, 185, 61, 15, 111, 2, 0, 0, 0, 0, 0, 0, 0, 108, 239, 22, 1, 0, 0, 0, 0, 105, 152, 167, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 103, 106, 65, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 254, 4, 150, 98, 0, 0, 0, 0, 217, 131, 1, 1, 10, 132, 103, 101, 116, 104, 137, 103, 111, 49, 46, 49, 54, 46, 49, 53, 133, 108, 105, 110, 117, 120, 0, 0, 195, 22, 123, 223, 0, 41, 249, 205, 23, 208, 8, 51, 177, 245, 163, 144, 236, 207, 192, 147, 16, 62, 203, 216, 222, 246, 176, 28, 99, 28, 41, 218, 40, 148, 54, 107, 73, 31, 159, 95, 22, 62, 230, 95, 30, 76, 73, 202, 46, 51, 103, 136, 250, 175, 162, 194, 221, 219, 55, 246, 219, 126, 61, 97, 211, 7, 155, 120, 44, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
const BLOCK_400: [u8; 1090] = [56, 0, 0, 0, 0, 0, 0, 0, 243, 247, 170, 68, 94, 168, 240, 122, 56, 249, 106, 176, 222, 159, 140, 206, 75, 214, 28, 179, 0, 127, 181, 255, 43, 170, 245, 85, 13, 65, 195, 143, 29, 204, 77, 232, 222, 199, 93, 122, 171, 133, 181, 103, 182, 204, 212, 26, 211, 18, 69, 27, 148, 138, 116, 19, 240, 161, 66, 253, 64, 212, 147, 71, 104, 91, 29, 237, 128, 19, 120, 93, 102, 35, 204, 24, 210, 20, 50, 11, 107, 182, 71, 89, 141, 253, 180, 148, 144, 234, 70, 80, 154, 228, 41, 94, 91, 251, 174, 37, 162, 39, 239, 158, 208, 78, 72, 85, 74, 251, 228, 249, 115, 210, 53, 59, 217, 130, 39, 173, 222, 247, 132, 187, 135, 1, 22, 144, 40, 120, 128, 112, 185, 219, 113, 177, 64, 189, 188, 118, 245, 188, 51, 145, 105, 225, 137, 68, 95, 243, 132, 6, 46, 245, 218, 123, 33, 255, 248, 65, 145, 147, 32, 117, 221, 214, 158, 29, 90, 183, 176, 84, 27, 147, 118, 77, 20, 71, 55, 204, 38, 107, 162, 139, 12, 166, 27, 16, 178, 91, 4, 65, 236, 4, 142, 105, 78, 32, 135, 60, 148, 92, 33, 72, 127, 131, 198, 128, 130, 200, 137, 88, 104, 145, 54, 40, 128, 112, 49, 95, 238, 88, 182, 100, 129, 88, 71, 237, 15, 97, 168, 36, 206, 78, 72, 50, 24, 251, 103, 10, 24, 37, 173, 57, 1, 246, 54, 203, 249, 139, 102, 181, 223, 162, 29, 94, 132, 6, 239, 168, 117, 87, 41, 90, 170, 198, 28, 100, 178, 37, 198, 119, 220, 5, 196, 200, 86, 218, 142, 124, 107, 30, 21, 164, 191, 119, 34, 151, 20, 68, 216, 86, 152, 143, 34, 244, 226, 187, 132, 42, 24, 87, 197, 82, 135, 47, 132, 51, 72, 16, 236, 4, 49, 157, 17, 132, 77, 179, 156, 176, 217, 216, 53, 222, 98, 166, 12, 157, 148, 129, 249, 152, 193, 101, 125, 194, 136, 141, 28, 51, 131, 140, 75, 200, 243, 92, 215, 152, 150, 33, 205, 129, 38, 156, 47, 139, 107, 20, 69, 155, 200, 129, 209, 84, 26, 52, 162, 152, 142, 113, 68, 96, 65, 27, 15, 47, 52, 155, 166, 15, 36, 148, 178, 177, 72, 138, 23, 226, 165, 214, 16, 18, 69, 154, 77, 217, 38, 52, 59, 127, 84, 34, 240, 34, 0, 242, 124, 108, 198, 5, 113, 100, 67, 48, 117, 40, 152, 241, 128, 10, 197, 74, 54, 202, 198, 204, 101, 90, 132, 57, 234, 13, 33, 84, 3, 45, 2, 0, 0, 0, 0, 0, 0, 0, 208, 239, 22, 1, 0, 0, 0, 0, 66, 4, 181, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 62, 76, 203, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 6, 150, 98, 0, 0, 0, 0, 216, 131, 1, 1, 10, 132, 103, 101, 116, 104, 136, 103, 111, 49, 46, 49, 51, 46, 52, 133, 108, 105, 110, 117, 120, 0, 0, 0, 195, 22, 123, 223, 1, 36, 101, 23, 108, 70, 26, 251, 49, 110, 188, 119, 60, 97, 250, 238, 133, 166, 81, 93, 170, 41, 94, 38, 73, 92, 239, 111, 105, 223, 166, 153, 17, 217, 216, 228, 243, 187, 173, 184, 155, 41, 169, 124, 110, 255, 184, 164, 17, 218, 188, 106, 222, 239, 170, 132, 245, 6, 124, 139, 190, 45, 76, 64, 123, 190, 73, 67, 142, 216, 89, 254, 150, 91, 20, 13, 207, 26, 171, 113, 169, 63, 52, 155, 186, 254, 193, 85, 24, 25, 184, 190, 30, 254, 162, 252, 70, 202, 116, 154, 161, 104, 91, 29, 237, 128, 19, 120, 93, 102, 35, 204, 24, 210, 20, 50, 11, 107, 182, 71, 89, 112, 246, 87, 22, 78, 91, 117, 104, 155, 100, 183, 253, 31, 162, 117, 243, 52, 242, 142, 24, 114, 182, 28, 96, 20, 52, 45, 145, 68, 112, 236, 122, 194, 151, 91, 227, 69, 121, 108, 43, 122, 226, 245, 185, 227, 134, 205, 27, 80, 164, 85, 6, 150, 217, 87, 203, 73, 0, 240, 58, 139, 108, 143, 217, 61, 111, 76, 234, 66, 187, 179, 69, 219, 198, 240, 223, 219, 91, 236, 115, 159, 140, 205, 175, 204, 57, 243, 199, 214, 235, 246, 55, 201, 21, 22, 115, 203, 195, 107, 136, 166, 247, 155, 96, 53, 159, 20, 29, 249, 10, 12, 116, 81, 37, 177, 49, 202, 175, 253, 18, 170, 207, 106, 129, 25, 247, 225, 22, 35, 181, 164, 61, 166, 56, 233, 31, 102, 154, 19, 15, 172, 14, 21, 160, 56, 238, 223, 198, 139, 163, 195, 92, 115, 254, 213, 190, 74, 7, 175, 181, 190, 128, 125, 221, 176, 116, 99, 156, 217, 250, 97, 180, 118, 118, 192, 100, 252, 80, 214, 44, 206, 47, 215, 84, 78, 11, 44, 201, 70, 146, 212, 167, 4, 222, 190, 247, 188, 182, 19, 40, 226, 211, 167, 57, 239, 252, 211, 169, 147, 135, 208, 21, 226, 96, 238, 250, 199, 46, 190, 161, 233, 174, 50, 97, 164, 117, 162, 123, 177, 2, 143, 20, 11, 194, 167, 200, 67, 49, 138, 253, 234, 10, 110, 60, 81, 27, 189, 16, 244, 81, 158, 206, 55, 220, 36, 136, 126, 17, 181, 93, 238, 34, 99, 121, 219, 131, 207, 252, 104, 20, 149, 115, 12, 17, 253, 222, 121, 186, 76, 12, 239, 2, 116, 227, 24, 16, 201, 223, 2, 249, 143, 175, 222, 15, 132, 31, 78, 102, 161, 205, 225, 206, 184, 239, 238, 202, 255, 50, 251, 159, 138, 97, 5, 58, 86, 182, 9, 161, 87, 207, 150, 92, 169, 210, 124, 241, 138, 38, 231, 125, 95, 161, 53, 36, 241, 62, 46, 53, 4, 34, 63, 237, 21, 254, 35, 7, 184, 249, 167, 176, 60, 144, 109, 135, 11, 164, 81, 91, 237, 98, 17, 37, 81, 232, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
const BLOCK_401: [u8; 670] = [56, 0, 0, 0, 0, 0, 0, 0, 157, 55, 33, 33, 7, 157, 246, 28, 81, 79, 213, 77, 3, 174, 185, 11, 47, 217, 59, 3, 37, 100, 176, 127, 252, 221, 248, 96, 159, 76, 14, 187, 29, 204, 77, 232, 222, 199, 93, 122, 171, 133, 181, 103, 182, 204, 212, 26, 211, 18, 69, 27, 148, 138, 116, 19, 240, 161, 66, 253, 64, 212, 147, 71, 112, 246, 87, 22, 78, 91, 117, 104, 155, 100, 183, 253, 31, 162, 117, 243, 52, 242, 142, 24, 37, 209, 13, 243, 0, 150, 68, 226, 184, 199, 193, 100, 250, 135, 62, 209, 221, 106, 215, 5, 124, 148, 40, 114, 161, 127, 177, 201, 45, 94, 221, 213, 156, 54, 2, 248, 153, 215, 179, 203, 189, 125, 67, 197, 96, 4, 125, 62, 138, 120, 19, 175, 172, 197, 236, 223, 77, 21, 236, 68, 150, 70, 92, 97, 14, 42, 56, 108, 175, 38, 49, 227, 152, 16, 194, 6, 72, 201, 200, 88, 158, 146, 38, 255, 108, 243, 18, 209, 37, 254, 249, 89, 246, 181, 207, 85, 48, 126, 223, 249, 106, 230, 217, 28, 246, 88, 165, 14, 255, 212, 247, 255, 247, 198, 206, 188, 231, 167, 111, 62, 219, 127, 254, 159, 126, 253, 87, 115, 85, 245, 84, 235, 245, 23, 247, 254, 199, 190, 115, 237, 199, 83, 157, 239, 123, 121, 151, 249, 175, 231, 253, 19, 113, 205, 170, 63, 61, 119, 173, 65, 175, 165, 36, 249, 249, 103, 118, 183, 229, 187, 230, 191, 223, 230, 235, 187, 255, 30, 159, 213, 247, 216, 235, 10, 250, 190, 142, 104, 217, 111, 47, 109, 239, 31, 246, 254, 175, 246, 25, 95, 118, 251, 83, 223, 14, 63, 191, 247, 250, 153, 187, 251, 140, 187, 191, 237, 51, 110, 81, 115, 207, 157, 247, 189, 243, 236, 225, 95, 254, 187, 254, 230, 12, 248, 126, 164, 123, 247, 254, 188, 222, 127, 230, 165, 248, 251, 247, 111, 185, 189, 251, 253, 138, 207, 91, 241, 239, 175, 148, 46, 189, 155, 251, 228, 39, 250, 73, 157, 118, 143, 253, 231, 170, 238, 87, 195, 237, 239, 35, 100, 239, 230, 123, 223, 111, 250, 243, 239, 233, 245, 119, 151, 63, 177, 152, 211, 255, 168, 80, 242, 89, 122, 247, 246, 127, 207, 235, 107, 210, 113, 118, 189, 190, 238, 233, 91, 95, 247, 162, 127, 95, 241, 183, 255, 126, 250, 150, 126, 117, 124, 158, 223, 252, 120, 119, 229, 217, 237, 239, 95, 221, 197, 223, 110, 124, 63, 222, 189, 120, 74, 142, 29, 2, 0, 0, 0, 0, 0, 0, 0, 209, 239, 22, 1, 0, 0, 0, 0, 69, 185, 186, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 125, 42, 83, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 6, 150, 98, 0, 0, 0, 0, 216, 131, 1, 1, 10, 132, 103, 101, 116, 104, 136, 103, 111, 49, 46, 49, 51, 46, 52, 133, 108, 105, 110, 117, 120, 0, 0, 0, 195, 22, 123, 223, 0, 176, 79, 163, 192, 193, 149, 218, 254, 196, 86, 217, 223, 186, 240, 8, 64, 180, 10, 142, 234, 169, 13, 227, 6, 35, 249, 232, 136, 253, 101, 75, 119, 94, 195, 203, 200, 52, 34, 95, 171, 187, 62, 90, 12, 131, 242, 13, 111, 235, 86, 11, 1, 10, 80, 33, 110, 152, 53, 107, 20, 50, 229, 40, 153, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
const INVALID_SIG: [u8; 1090] = [56, 0, 0, 0, 0, 0, 0, 0, 243, 247, 170, 68, 94, 168, 240, 122, 56, 249, 106, 176, 222, 159, 140, 206, 75, 214, 28, 179, 0, 127, 181, 255, 43, 170, 245, 85, 13, 65, 195, 143, 29, 204, 77, 232, 222, 199, 93, 122, 171, 133, 181, 103, 182, 204, 212, 26, 211, 18, 69, 27, 148, 138, 116, 19, 240, 161, 66, 253, 64, 212, 147, 71, 104, 91, 29, 237, 128, 19, 120, 93, 102, 35, 204, 24, 210, 20, 50, 11, 107, 182, 71, 89, 141, 253, 180, 148, 144, 234, 70, 80, 154, 228, 41, 94, 91, 251, 174, 37, 162, 39, 239, 158, 208, 78, 72, 85, 74, 251, 228, 249, 115, 210, 53, 59, 217, 130, 39, 173, 222, 247, 132, 187, 135, 1, 22, 144, 40, 120, 128, 112, 185, 219, 113, 177, 64, 189, 188, 118, 245, 188, 51, 145, 105, 225, 137, 68, 95, 243, 132, 6, 46, 245, 218, 123, 33, 255, 248, 65, 145, 147, 32, 117, 221, 214, 158, 29, 90, 183, 176, 84, 27, 147, 118, 77, 20, 71, 55, 204, 38, 107, 162, 139, 12, 166, 27, 16, 178, 91, 4, 65, 236, 4, 142, 105, 78, 32, 135, 60, 148, 92, 33, 72, 127, 131, 198, 128, 130, 200, 137, 88, 104, 145, 54, 40, 128, 112, 49, 95, 238, 88, 182, 100, 129, 88, 71, 237, 15, 97, 168, 36, 206, 78, 72, 50, 24, 251, 103, 10, 24, 37, 173, 57, 1, 246, 54, 203, 249, 139, 102, 181, 223, 162, 29, 94, 132, 6, 239, 168, 117, 87, 41, 90, 170, 198, 28, 100, 178, 37, 198, 119, 220, 5, 196, 200, 86, 218, 142, 124, 107, 30, 21, 164, 191, 119, 34, 151, 20, 68, 216, 86, 152, 143, 34, 244, 226, 187, 132, 42, 24, 87, 197, 82, 135, 47, 132, 51, 72, 16, 236, 4, 49, 157, 17, 132, 77, 179, 156, 176, 217, 216, 53, 222, 98, 166, 12, 157, 148, 129, 249, 152, 193, 101, 125, 194, 136, 141, 28, 51, 131, 140, 75, 200, 243, 92, 215, 152, 150, 33, 205, 129, 38, 156, 47, 139, 107, 20, 69, 155, 200, 129, 209, 84, 26, 52, 162, 152, 142, 113, 68, 96, 65, 27, 15, 47, 52, 155, 166, 15, 36, 148, 178, 177, 72, 138, 23, 226, 165, 214, 16, 18, 69, 154, 77, 217, 38, 52, 59, 127, 84, 34, 240, 34, 0, 242, 124, 108, 198, 5, 113, 100, 67, 48, 117, 40, 152, 241, 128, 10, 197, 74, 54, 202, 198, 204, 101, 90, 132, 57, 234, 13, 33, 84, 3, 45, 2, 0, 0, 0, 0, 0, 0, 0, 208, 239, 22, 1, 0, 0, 0, 0, 66, 4, 181, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 62, 76, 203, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 6, 150, 98, 0, 0, 0, 0, 216, 131, 1, 1, 10, 132, 103, 101, 116, 104, 136, 103, 111, 49, 46, 49, 51, 46, 52, 133, 108, 105, 110, 117, 120, 0, 0, 0, 195, 22, 123, 223, 1, 36, 101, 23, 108, 70, 26, 251, 49, 110, 188, 119, 60, 97, 250, 238, 133, 166, 81, 93, 170, 41, 94, 38, 73, 92, 239, 111, 105, 223, 166, 153, 17, 217, 216, 228, 243, 187, 173, 184, 155, 41, 169, 124, 110, 255, 184, 164, 17, 218, 188, 106, 222, 239, 170, 132, 245, 6, 124, 139, 190, 45, 76, 64, 123, 190, 73, 67, 142, 216, 89, 254, 150, 91, 20, 13, 207, 26, 171, 113, 169, 63, 52, 155, 186, 254, 193, 85, 24, 25, 184, 190, 30, 254, 162, 252, 70, 202, 116, 154, 161, 104, 91, 29, 237, 128, 19, 120, 93, 102, 35, 204, 24, 210, 20, 50, 11, 107, 182, 71, 89, 112, 246, 87, 22, 78, 91, 117, 104, 155, 100, 183, 253, 31, 162, 117, 243, 52, 242, 142, 24, 114, 182, 28, 96, 20, 52, 45, 145, 68, 112, 236, 122, 194, 151, 91, 227, 69, 121, 108, 43, 122, 226, 245, 185, 227, 134, 205, 27, 80, 164, 85, 6, 150, 217, 87, 203, 73, 0, 240, 58, 139, 108, 143, 217, 61, 111, 76, 234, 66, 187, 179, 69, 219, 198, 240, 223, 219, 91, 236, 115, 159, 140, 205, 175, 204, 57, 243, 199, 214, 235, 246, 55, 201, 21, 22, 115, 203, 195, 107, 136, 166, 247, 155, 96, 53, 159, 20, 29, 249, 10, 12, 116, 81, 37, 177, 49, 202, 175, 253, 18, 170, 207, 106, 129, 25, 247, 225, 22, 35, 181, 164, 61, 166, 56, 233, 31, 102, 154, 19, 15, 172, 14, 21, 160, 56, 238, 223, 198, 139, 163, 195, 92, 115, 254, 213, 190, 74, 7, 175, 181, 190, 128, 125, 221, 176, 116, 99, 156, 217, 250, 97, 180, 118, 118, 192, 100, 252, 80, 214, 44, 206, 47, 215, 84, 78, 11, 44, 201, 70, 146, 212, 167, 4, 222, 190, 247, 188, 182, 19, 40, 226, 211, 167, 57, 239, 252, 211, 169, 147, 135, 208, 21, 226, 96, 238, 250, 199, 46, 190, 161, 233, 174, 50, 97, 164, 117, 162, 123, 177, 2, 143, 20, 11, 194, 167, 200, 67, 49, 138, 253, 234, 10, 110, 60, 81, 27, 189, 16, 244, 81, 158, 206, 55, 220, 36, 136, 126, 17, 181, 93, 238, 34, 99, 121, 219, 131, 207, 252, 104, 20, 149, 115, 12, 17, 253, 222, 121, 186, 76, 12, 239, 2, 116, 227, 24, 16, 201, 223, 2, 249, 143, 175, 222, 15, 132, 31, 78, 102, 161, 205, 225, 206, 184, 239, 238, 202, 255, 50, 251, 159, 138, 97, 5, 58, 86, 182, 9, 161, 87, 207, 150, 92, 169, 210, 124, 241, 138, 38, 231, 125, 95, 161, 53, 36, 241, 62, 46, 53, 4, 34, 63, 237, 21, 254, 35, 7, 184, 249, 167, 176, 60, 144, 109, 135, 11, 164, 81, 91, 237, 98, 17, 37, 81, 231, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
const CORRUPT_HEADER: [u8; 1089] = [0, 0, 0, 0, 0, 0, 0, 243, 247, 170, 68, 94, 168, 240, 122, 56, 249, 106, 176, 222, 159, 140, 206, 75, 214, 28, 179, 0, 127, 181, 255, 43, 170, 245, 85, 13, 65, 195, 143, 29, 204, 77, 232, 222, 199, 93, 122, 171, 133, 181, 103, 182, 204, 212, 26, 211, 18, 69, 27, 148, 138, 116, 19, 240, 161, 66, 253, 64, 212, 147, 71, 104, 91, 29, 237, 128, 19, 120, 93, 102, 35, 204, 24, 210, 20, 50, 11, 107, 182, 71, 89, 141, 253, 180, 148, 144, 234, 70, 80, 154, 228, 41, 94, 91, 251, 174, 37, 162, 39, 239, 158, 208, 78, 72, 85, 74, 251, 228, 249, 115, 210, 53, 59, 217, 130, 39, 173, 222, 247, 132, 187, 135, 1, 22, 144, 40, 120, 128, 112, 185, 219, 113, 177, 64, 189, 188, 118, 245, 188, 51, 145, 105, 225, 137, 68, 95, 243, 132, 6, 46, 245, 218, 123, 33, 255, 248, 65, 145, 147, 32, 117, 221, 214, 158, 29, 90, 183, 176, 84, 27, 147, 118, 77, 20, 71, 55, 204, 38, 107, 162, 139, 12, 166, 27, 16, 178, 91, 4, 65, 236, 4, 142, 105, 78, 32, 135, 60, 148, 92, 33, 72, 127, 131, 198, 128, 130, 200, 137, 88, 104, 145, 54, 40, 128, 112, 49, 95, 238, 88, 182, 100, 129, 88, 71, 237, 15, 97, 168, 36, 206, 78, 72, 50, 24, 251, 103, 10, 24, 37, 173, 57, 1, 246, 54, 203, 249, 139, 102, 181, 223, 162, 29, 94, 132, 6, 239, 168, 117, 87, 41, 90, 170, 198, 28, 100, 178, 37, 198, 119, 220, 5, 196, 200, 86, 218, 142, 124, 107, 30, 21, 164, 191, 119, 34, 151, 20, 68, 216, 86, 152, 143, 34, 244, 226, 187, 132, 42, 24, 87, 197, 82, 135, 47, 132, 51, 72, 16, 236, 4, 49, 157, 17, 132, 77, 179, 156, 176, 217, 216, 53, 222, 98, 166, 12, 157, 148, 129, 249, 152, 193, 101, 125, 194, 136, 141, 28, 51, 131, 140, 75, 200, 243, 92, 215, 152, 150, 33, 205, 129, 38, 156, 47, 139, 107, 20, 69, 155, 200, 129, 209, 84, 26, 52, 162, 152, 142, 113, 68, 96, 65, 27, 15, 47, 52, 155, 166, 15, 36, 148, 178, 177, 72, 138, 23, 226, 165, 214, 16, 18, 69, 154, 77, 217, 38, 52, 59, 127, 84, 34, 240, 34, 0, 242, 124, 108, 198, 5, 113, 100, 67, 48, 117, 40, 152, 241, 128, 10, 197, 74, 54, 202, 198, 204, 101, 90, 132, 57, 234, 13, 33, 84, 3, 45, 2, 0, 0, 0, 0, 0, 0, 0, 208, 239, 22, 1, 0, 0, 0, 0, 66, 4, 181, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 62, 76, 203, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 6, 150, 98, 0, 0, 0, 0, 216, 131, 1, 1, 10, 132, 103, 101, 116, 104, 136, 103, 111, 49, 46, 49, 51, 46, 52, 133, 108, 105, 110, 117, 120, 0, 0, 0, 195, 22, 123, 223, 1, 36, 101, 23, 108, 70, 26, 251, 49, 110, 188, 119, 60, 97, 250, 238, 133, 166, 81, 93, 170, 41, 94, 38, 73, 92, 239, 111, 105, 223, 166, 153, 17, 217, 216, 228, 243, 187, 173, 184, 155, 41, 169, 124, 110, 255, 184, 164, 17, 218, 188, 106, 222, 239, 170, 132, 245, 6, 124, 139, 190, 45, 76, 64, 123, 190, 73, 67, 142, 216, 89, 254, 150, 91, 20, 13, 207, 26, 171, 113, 169, 63, 52, 155, 186, 254, 193, 85, 24, 25, 184, 190, 30, 254, 162, 252, 70, 202, 116, 154, 161, 104, 91, 29, 237, 128, 19, 120, 93, 102, 35, 204, 24, 210, 20, 50, 11, 107, 182, 71, 89, 112, 246, 87, 22, 78, 91, 117, 104, 155, 100, 183, 253, 31, 162, 117, 243, 52, 242, 142, 24, 114, 182, 28, 96, 20, 52, 45, 145, 68, 112, 236, 122, 194, 151, 91, 227, 69, 121, 108, 43, 122, 226, 245, 185, 227, 134, 205, 27, 80, 164, 85, 6, 150, 217, 87, 203, 73, 0, 240, 58, 139, 108, 143, 217, 61, 111, 76, 234, 66, 187, 179, 69, 219, 198, 240, 223, 219, 91, 236, 115, 159, 140, 205, 175, 204, 57, 243, 199, 214, 235, 246, 55, 201, 21, 22, 115, 203, 195, 107, 136, 166, 247, 155, 96, 53, 159, 20, 29, 249, 10, 12, 116, 81, 37, 177, 49, 202, 175, 253, 18, 170, 207, 106, 129, 25, 247, 225, 22, 35, 181, 164, 61, 166, 56, 233, 31, 102, 154, 19, 15, 172, 14, 21, 160, 56, 238, 223, 198, 139, 163, 195, 92, 115, 254, 213, 190, 74, 7, 175, 181, 190, 128, 125, 221, 176, 116, 99, 156, 217, 250, 97, 180, 118, 118, 192, 100, 252, 80, 214, 44, 206, 47, 215, 84, 78, 11, 44, 201, 70, 146, 212, 167, 4, 222, 190, 247, 188, 182, 19, 40, 226, 211, 167, 57, 239, 252, 211, 169, 147, 135, 208, 21, 226, 96, 238, 250, 199, 46, 190, 161, 233, 174, 50, 97, 164, 117, 162, 123, 177, 2, 143, 20, 11, 194, 167, 200, 67, 49, 138, 253, 234, 10, 110, 60, 81, 27, 189, 16, 244, 81, 158, 206, 55, 220, 36, 136, 126, 17, 181, 93, 238, 34, 99, 121, 219, 131, 207, 252, 104, 20, 149, 115, 12, 17, 253, 222, 121, 186, 76, 12, 239, 2, 116, 227, 24, 16, 201, 223, 2, 249, 143, 175, 222, 15, 132, 31, 78, 102, 161, 205, 225, 206, 184, 239, 238, 202, 255, 50, 251, 159, 138, 97, 5, 58, 86, 182, 9, 161, 87, 207, 150, 92, 169, 210, 124, 241, 138, 38, 231, 125, 95, 161, 53, 36, 241, 62, 46, 53, 4, 34, 63, 237, 21, 254, 35, 7, 184, 249, 167, 176, 60, 144, 109, 135, 11, 164, 81, 91, 237, 98, 17, 37, 81, 232, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];

#[test]
fn init_bridge_instance_works_with_valid_header() {
	new_test_ext().execute_with(|| {
		// Dispatch a signed extrinsic.
		assert_ok!(BinanceFv::init_bridge_instance(Origin::signed(1), BLOCK_200.to_vec()));

		// checks validator writes
		if let Some(val_set) = Validators::<Test>::get() {
			assert_eq!(val_set.last_update, 18280200);
			assert_eq!(val_set.validators.len(), 21);
		} else {
			assert!(false);
		}

		let valid_header: Header = Decode::decode(&mut &*BLOCK_200.to_vec()).unwrap();

		if let Some(header) = Headers::<Test>::get(valid_header.hash()) {
			assert_eq!(header, valid_header);
		} else {
			assert!(false);
		}

	});
}

#[test]
fn init_bridge_instance_fails_with_corrupt_header() {
	new_test_ext().execute_with(|| {
		// Dispatch a signed extrinsic.
		match BinanceFv::init_bridge_instance(Origin::signed(1), CORRUPT_HEADER.to_vec()) {
			Ok(_) => assert!(false),
			Err(err) => assert!(true)
				// assert_eq!(err, crate::Error::<T>::InvalidEncoding.into())
		}
	});
}

#[test]
fn init_bridge_instance_fails_with_invalid_sig() {
	new_test_ext().execute_with(|| {
		// Dispatch a signed extrinsic.
		match BinanceFv::init_bridge_instance(Origin::signed(1), INVALID_SIG.to_vec()) {
			Ok(_) => assert!(false),
			Err(err) => assert!(true) // WIP. Want to detect error type also
				// assert_eq!(err, crate::Error::<T>::InvalidEncoding.into())
		}
	});
}

#[test]
fn submit_header_works_with_correct_header() {
	new_test_ext().execute_with(|| {
		// init pallet
		BinanceFv::init_bridge_instance(Origin::signed(1), BLOCK_200.to_vec());
		let validator_set_old = Validators::<Test>::get().unwrap();

		match BinanceFv::submit_header(Origin::signed(1), BLOCK_300.to_vec()) {
			Err(err) => assert!(false),
			_ => ()
		}

		//Submitted non-epoch block. ValidatorSet should stay the same
		match Validators::<Test>::try_get() {
			Ok(validator_set_new) => assert_eq!(validator_set_old, validator_set_new),
			Err(_) => assert!(false)
		}

		let header: Header = Decode::decode(&mut &*BLOCK_300.to_vec()).unwrap();

		match Headers::<Test>::try_get(&header.hash()) {
			Ok(stored_header) => assert_eq!(header, stored_header),
			Err(_) => assert!(false)
		}

		// Submit next block
		match BinanceFv::submit_header(Origin::signed(1), BLOCK_400.to_vec()) {
			Err(err) => assert!(false),
			_ => ()
		}

		//Submitted non-epoch block. ValidatorSet should stay the same
		match Validators::<Test>::try_get() {
			Ok(validator_set_new) => {
				assert_eq!(validator_set_new.last_update, 18280400);
				assert_eq!(validator_set_new.validators.len(), 21) // could have same validators
			}
			Err(_) => assert!(false)
		}

		let header: Header = Decode::decode(&mut &*BLOCK_400.to_vec()).unwrap();

		match Headers::<Test>::try_get(&header.hash()) {
			Ok(stored_header) => assert_eq!(header, stored_header),
			Err(_) => assert!(false)
		}

	});
}

#[test]
fn submit_header_prevents_out_of_range() {
	new_test_ext().execute_with(|| {
		// init pallet
		BinanceFv::init_bridge_instance(Origin::signed(1), BLOCK_200.to_vec());

		// this block can't be verified with the current ValidatorSet because its to far ahead
		// This checks validator_set_authorized
		match BinanceFv::submit_header(Origin::signed(1), BLOCK_401.to_vec()) {
			Ok(()) => assert!(false),
			Err(err) => () // check for correct error here
		}
	});
}

#[test]
fn submit_header_prevents_backwards_submission() {
	new_test_ext().execute_with(|| {
		// init pallet
		BinanceFv::init_bridge_instance(Origin::signed(1), BLOCK_400.to_vec());
		// This checks validator_set_authorized
		match BinanceFv::submit_header(Origin::signed(1), BLOCK_200.to_vec()) {
			Ok(()) => assert!(false),
			Err(err) => () // check for correct error here
		}
	});
}

#[test]
fn submit_header_prevents_fails_with_corrupt_header() {
	new_test_ext().execute_with(|| {
		// init pallet
		BinanceFv::init_bridge_instance(Origin::signed(1), BLOCK_400.to_vec());
		let validator_set_old = Validators::<Test>::get().unwrap();
		match BinanceFv::submit_header(Origin::signed(1), CORRUPT_HEADER.to_vec()) {
			Ok(()) => assert!(false),
			Err(err) => () // check for correct error here
		}
	});
}

#[test]
fn submit_header_prevents_fails_with_invalid_sig() {
	new_test_ext().execute_with(|| {
		// init pallet
		BinanceFv::init_bridge_instance(Origin::signed(1), BLOCK_400.to_vec());
		// This checks validator_set_authorized
		match BinanceFv::submit_header(Origin::signed(1), INVALID_SIG.to_vec()) {
			Ok(()) => assert!(false),
			Err(err) => () // check for correct error here
		}
	});
}

#[test]
fn submit_header_range_with_valid_data() {
	new_test_ext().execute_with(|| {
		// init pallet
		BinanceFv::init_bridge_instance(Origin::signed(1), BLOCK_200.to_vec());
		// This checks validator_set_authorized
		let header: Header = Decode::decode(&mut &*BLOCK_200.to_vec()).unwrap();
		let mut range: Vec<Vec<u8>> = vec![BLOCK_201.to_vec(), BLOCK_202.to_vec(), BLOCK_203.to_vec(), BLOCK_204.to_vec(), BLOCK_205.to_vec()];

		range.reverse();
		match BinanceFv::submit_header_range(Origin::signed(1), range, header.hash().as_bytes().to_vec()) {
			Ok(()) => (),
			Err(err) => assert!(false) // check for correct error here
		}

		assert_eq!(Headers::

				   ::iter().count(), 6);


	});
}
