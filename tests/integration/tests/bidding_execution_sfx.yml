settings:
  chains:
    relay_chain: &relay_chain
      wsPort: 9900
    t3rn: &t3rn
      wsPort: 9940
    t0rn: &t0rn
      wsPort: 9944
  variables:
    chains:
      relay_chain:
        signer: &rc_signer //Alice
      t0rn:
        signer: &t0_signer //Alice


tests:
  - name: SFX submission for bidding and execution
    its:
      - name: Submit a SFX transfer - no bid should kill
        actions:
          - extrinsics:
            - chain: *t0rn
              signer: *t0_signer
              pallet: circuit
              call: onExtrinsicTrigger
              args: [
                [
                  {
                    target: "roco",
                    type: "tran",
                    to: 5EoHBHDBNj61SbqNPcgYzwHXY1xAroduRP3M99iSMZ8kwvgp,
                    amount: 4,
                    insurance: 1,
                    reward: 4,
                  }
                ],
                false
              ]
              events:
                - name: accountManager.DepositReceived
                - name: circuit.NewSideEffectsAvailable
                - name: circuit.XTransactionReceivedForExec
                - name: clock.NewRound 
                - name: clock.NewRound
                - name: circuit.XTransactionXtxDroppedAtBidding

      # - name: Submit a SFX - bid should set to ready
      #   actions:
      #     - extrinsics:
      #       - chain: *para_chain
      #         sudo: false
      #         signer: *signer
      #         pallet: circuit
      #         call: onExtrinsicTrigger
      #         args: [
      #           [
      #             {
      #               target: "roco",
      #               type: "tran",
      #               to: 5EoHBHDBNj61SbqNPcgYzwHXY1xAroduRP3M99iSMZ8kwvgp,
      #               amount: 4,
      #               insurance: 1,
      #               reward: 4,
      #             }
      #           ],
      #           false
      #         ]
      #         events:
      #           - name: accountManager.DepositReceived
      #           - name: circuit.NewSideEffectsAvailable
      #           - name: circuit.XTransactionReceivedForExec
            
      # - name: Submit a SFX confirmation - moves to finished
      #   its:
      #     - name: 
      # - name: Not submitting SFX after bid moves to revert 
      #   its:
      #     - name: 

